const workSchedule = [
    {
        name: '+972(52)667-29-98',
        link: '+97252667299',
    },
    {
        name: 'Working 7 days a week',
        link: false,
    },
    {
        name: '9am â€” 6pm',
        link: false,
    },
];

const loginLinksData = [
    {
        name: 'Sing in',
        link: '/login',
        data: 'singin'
    },
    {
        name: 'Sing up',
        link: '/registrayion',
        data: 'singup'
    }
];

const navLinks = [
    {
        name: 'Favorites',
        link: '#',
        icon: false,
    },
    {
        name: 'Specials',
        link: '#',
        icon: false,
    },
    {
        name: 'Settings',
        link: '#',
        icon: false,
    },
    {
        name: 'Cart',
        link: '#',
        icon: `<svg width="20" height="14" viewBox="0 0 20 14" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M19.0035 4.81175C18.9192 4.6899 18.8066 4.59031 18.6754 4.5215C18.5441 4.45269 18.3982 4.41672 18.25 4.41667H5.72193L4.66409 1.8775C4.52539 1.54312 4.29052 1.25746 3.98927 1.05673C3.68801 0.856001 3.33393 0.749247 2.97193 0.750004H0.833344V2.58334H2.97193L7.32059 13.0196C7.39025 13.1866 7.50775 13.3292 7.65831 13.4295C7.80887 13.5298 7.98575 13.5834 8.16668 13.5833H15.5C15.8823 13.5833 16.2242 13.3459 16.3589 12.9893L19.1089 5.656C19.1609 5.51724 19.1785 5.36794 19.1601 5.22091C19.1417 5.07387 19.088 4.93348 19.0035 4.81175ZM14.8648 11.75H8.77809L6.48643 6.25H16.9273L14.8648 11.75Z" fill="white"/>
        </svg>
        `,
    },
    {
        name: 'Search',
        link: '#',
        icon: `<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M17.25 15.4167L12.5255 10.6922C13.3989 9.36482 13.7487 7.76053 13.5072 6.18999C13.2657 4.61945 12.4501 3.19437 11.2182 2.19068C9.98634 1.18698 8.42587 0.67606 6.83892 0.756838C5.25197 0.837616 3.75144 1.50434 2.62785 2.62794C1.50425 3.75153 0.837524 5.25206 0.756746 6.83901C0.675968 8.42596 1.18689 9.98643 2.19058 11.2183C3.19428 12.4502 4.61936 13.2658 6.1899 13.5073C7.76044 13.7488 9.36473 13.399 10.6922 12.5256L15.4167 17.2501L17.25 15.4167ZM2.58332 7.16675C2.58332 4.6395 4.63941 2.58341 7.16666 2.58341C9.69391 2.58341 11.75 4.6395 11.75 7.16675C11.75 9.694 9.69391 11.7501 7.16666 11.7501C4.63941 11.7501 2.58332 9.694 2.58332 7.16675Z" fill="white"/>
        </svg>
        `,
    },
];


const mainSliderCards = [
    {
        name: 'Louis XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, 
    {
        name: 'Gucci XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, 
    {
        name: 'Prada XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, 
    {
        name: 'Louis XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, 
];

const newArrivalsCards = [
    {
        name: 'Louis XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, 
    {
        name: 'Gucci XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, 
    {
        name: 'Prada XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, 
    {
        name: 'Louis XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, , 
    {
        name: 'Prada XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, 
    {
        name: 'Louis XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, , 
    {
        name: 'Prada XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, 
    {
        name: 'Louis XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, , 
    {
        name: 'Louis XVI ATHOS',
        link: '#',
        price: '6 000',
        currency: '$',
        img: './images/item.png',
    }, 
];

const brandsList = [
    {
        name: 'Brand name',
        link: '/#',
        img: 'url("./images/brand.png")'
    },
    {
        name: 'Brand name',
        link: '/#',
        img: 'url("./images/brand.png")'
    },
    {
        name: 'Brand name',
        link: '/#',
        img: 'url("./images/brand.png")'
    },
    {
        name: 'Brand name',
        link: '/#',
        img: 'url("./images/brand.png")'
    },
];

const smallCategories = [
    {
        name: 'Watches',
        link: '/#',
    },
    {
        name: 'Suits',
        link: '/#',
    },
    {
        name: 'Belts',
        link: '/#',
    },
    {
        name: 'Cufflinks',
        link: '/#',
    },
];

const mailingForm = {
    inputType: 'email',
    method: 'post',
    formName: 'mailing',
    inputName: 'userMail',
    formClass: 'mailing',
    inputClass: 'mailing__input',
    formAction: 'https://httpbin.org/post',
    placeholder: 'Your email',
}





// import Worktime from './components/Worktime.js';
// import LoginLinks from './components/LoginLinks.js';
// import Nav from './components/Nav.js';
// import Cards from './components/Cards.js';
// import Brands from './components/Brands.js';
// import CategoriesList from './components/CategoriesList.js';

// header top line
// const headerTopline = document.querySelector('.header__work-info');
// const headerNav = document.querySelector('.header__nav');
// const promoSlider = document.querySelector('.promo-categoties__slider');
// const newArrivals = document.querySelector('.cards-new-arr');
// const brands = document.querySelector('.brands');
// const smallCatsWrapper = document.querySelector('.info__body_type_categories');
// const mailingWrapper = document.querySelector('.info__body_type_newsletter');
// const footer = document.querySelector('.footer');

// const workList = new Worktime(workSchedule);
// const login = new LoginLinks(loginLinksData);
// const loginFooter = new LoginLinks(loginLinksData);
// const navigation = new Nav(navLinks);
// const sliderCards = new Cards(mainSliderCards);
// const newCollectionCards = new Cards(newArrivalsCards);
// const footeBrandsList = new Brands(brandsList);
// const smallCategoriesList = new CategoriesList(smallCategories);

headerTopline.append(workList.elem);
headerTopline.append(login.elem);
footer.append(loginFooter.elem);
headerNav.append(navigation.elem);
promoSlider.append(sliderCards.elem);
newArrivals.append(newCollectionCards.elem);
brands.append(footeBrandsList.elem);
smallCatsWrapper.append(smallCategoriesList.elem);

function getShowMoreBnt(htmlCollection, number, link) {
    const arr = Array.from(htmlCollection.children);
    const showMore = document.createElement('a');


    if (arr.length > number) {
        arr.forEach((card, i) => {
            if (i >= number) {
                card.remove();
            }
        }) 
        showMore.href = link;
        showMore.textContent = 'Show more';
        showMore.classList.add('page__link', 'button', 'cards__show-more')

        htmlCollection.append(showMore);
    }
    if (window.innerWidth > 750) {
        showMore.addEventListener('click', function(event) {
            event.preventDefault();
            arr.forEach((card, i) => {
                if (i >= number) {
                    card.style.transition = '0.5s';
                    htmlCollection.append(card);
                }
            });
            showMore.remove();
        });
    }
}

function createForm(obj, wrapper) {
    let form = document.createElement('form');
    form.name = obj.formName;
    form.classList.add(obj.formClass);
    form.action = obj.formAction;
    form.setAttribute('novalidate', true);
    form.setAttribute('action', 'https://httpbin.org/post');
    form.setAttribute('method', 'post');

    form.innerHTML = `
    <label class="mailing__label" for="${obj.inputName}">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mi semper viverra nunc cursus tortor lectus nunc nulla nibh.
    </label>
    <input type="${obj.inputType}" placeholder="${obj.placeholder}" id="${obj.inputName}" class="${obj.inputClass}" name="${obj.inputName}" required autocomplete="off">
    <button type="submit" class="mailing__submit mailing__submit_disabled" disabled>Submit</button>
    `

    wrapper.append(form);
}

createForm(mailingForm, mailingWrapper);
getShowMoreBnt(newArrivals.querySelector('.cards'), 8, '/#');

(function setFooterInfo() {
    const copywrite = `${new Date().getFullYear()} All rights reserved` ;
    const designOwner = 'Design Figma.info'
    
    const footerLine = document.querySelector('.footer__wrapper');
    footerLine.innerHTML = `<p class="footer__copy-text">${copywrite}</p><p class="footer__copy-text">${designOwner}</p>`
})();

// form submit
(function() {
    const form = document.forms.mailing;
    const input = form.userMail;
    const errorSpan = document.createElement('span');
    const submitBtn = form.querySelector('.mailing__submit');
    errorSpan.classList.add('mailing__error');
    form.append(errorSpan);

    function showMsg(inputElem) {
        errorSpan.textContent = inputElem;
    }

    function hideMsg() {
        errorSpan.textContent = '';
    }

    function checkInput(event) {
        if (event.target.validity.valid) {
            hideMsg();
            submitBtn.classList.remove('mailing__submit_disabled');
            submitBtn.removeAttribute('disabled', 'false');
        } else {
            showMsg(event.target.validationMessage);
            submitBtn.classList.add('mailing__submit_disabled');
            submitBtn.setAttribute('disabled', 'true');
        }
    }    



    function submitSubscriptionForm(event) {
        event.preventDefault();
        if (input.validity.valid) {
            input.value = '';

        } else {
            showMsg(input.validationMessage);
        }

        let formData = new FormData(event.target);
        fetch('https://httpbin.org/post', { method: "POST", body: formData })
        .then((response) => {
            return response.json;
        })
        .then(() => {
            showMsg('Thank you! :)');
            setTimeout(hideMsg, 3000)
        });
    }

    input.addEventListener('input', checkInput);
    input.addEventListener('focusout', hideMsg);
    form.addEventListener('submit', submitSubscriptionForm);
})();


// header popup
(function() {
    const openPopupButton = document.querySelector('.header__nav-toggle');
    const navWrapper = document.querySelector('.header__nav-links');
    const body = document.querySelector('.body');

    let openPopup = event => {
        event.preventDefault();
        navWrapper.classList.toggle('header__nav-links_opened');
        openPopupButton.classList.toggle('header__nav-toggle_opened');

        if (navWrapper.classList.contains('header__nav-links_opened')) {
            body.style.overflow = 'hidden';
        } else {
            body.style.overflow = '';
        }
    };

    openPopupButton.addEventListener('click', openPopup);
})();

// swipe cards
document.addEventListener('pointerdown', function(event) {
    if (event.target.closest('.card__img')) {
        event.preventDefault();
    }
    if (event.target.closest('.promo-categoties__slider')) {
        const onPointerMove = (event) => {
            const cards = document.querySelector('.promo-categoties__slider .cards');
            let xPointer = event.clientX - cards.getBoundingClientRect().left; 
            console.log(xPointer)
            cards.scroll({
                top: 0,
                left: xPointer,
                behavior: 'smooth'
              })
        }
        
        document.addEventListener('pointerup', onPointerMove);
    }
    document.onpointerup = function(event) {
        document.removeEventListener('pointerup', onPointerMove);
    }
});